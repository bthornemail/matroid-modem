# RFC-0016

# Canonical Canon Hashing Standard v1.0

## Deterministic Hashing of Civic and Semantic Corpora

Status: Draft
Depends on: RFC-0003, RFC-0007

---

# 1. Purpose

Defines canonical hashing for:

* Founding documents
* Closure registry
* Canon corpora
* Narrative series

Ensures basisHash reproducibility.

---

# 2. Canon Sources

Eligible inputs:

* Markdown (.md)
* NDJSON
* JSON Canvas
* Registry JSON

---

# 3. Canonicalization Rules

Before hashing:

1. Normalize line endings to LF
2. Trim trailing whitespace
3. Lowercase keywords (optional)
4. Remove BOM
5. Sort JSON keys lexicographically
6. Ensure stable indentation

---

# 4. Hash Function

```id="h1"
basisHash = sha256(canonical_serialization)
```

Output hex encoded.

---

# 5. Multi-Document Canon

If canon is composed of multiple documents:

```id="h2"
basisHash = sha256(
  concat(
    sha256(doc1),
    sha256(doc2),
    ...
  )
)
```

Documents sorted lexicographically by filename.

---

# 6. Canon Manifest

```json id="h3"
{
  "basisRef":"founding-v1",
  "documents":[
    "Declaration of Independence.md",
    "Constitution.md"
  ],
  "basisHash":"sha256-..."
}
```

---

# 7. Hash Stability Invariant

Given identical document content, basisHash MUST be identical across platforms.

---

# 8. Canon Drift Detection

If:

```id="h4"
new_basisHash ≠ stored_basisHash
```

Portal must:

* Invalidate ledger replay
* Quarantine foreign federation events

---

# 9. Canon Versioning

Version tag format:

```id="h5"
<canon_name>-v<major>.<minor>
```

Major change → semantic shift
Minor change → non-semantic edit

---

# 10. Cryptographic Constraint

Hash algorithm MUST be SHA-256.
