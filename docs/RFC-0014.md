# RFC-0014

# Semantic Type System v1.0

## Strong Typing for Semantic Coordinates, Closures, and Civic Triples

Status: Draft
Depends on: RFC-0001–0013

---

# 1. Purpose

Defines the formal type system governing:

* SynsetRPC calls
* Closure execution
* Civic triples
* SAB projection
* Federation alignment

This prevents semantic category errors.

---

# 2. Core Type Universe

```id="t1"
Type ::= Entity
       | Relation
       | Collective
       | Witness
       | Coordinate
       | Drift
       | Synset
       | Closure
       | CivicTriple
       | Basis
```

---

# 3. Primitive Types

### 3.1 Entity

Represents subject.

Example: "Congress"

### 3.2 Relation

Represents predicate.

Example: "legislate"

### 3.3 Collective

Represents object.

Example: "the People"

### 3.4 Witness

Ledger or centroid.

Example: commit

---

# 4. Composite Types

### 4.1 Coordinate

```id="t2"
Coordinate = (x:Float, y:Float, z:Float, w:Float)
```

Domain: [0,1]

---

### 4.2 CivicTriple

```id="t3"
CivicTriple = {
  subject: Entity,
  predicate: Relation,
  object: Collective,
  epistemic_mode: Quadrant
}
```

---

### 4.3 Closure

```id="t4"
Closure = {
  closure_id: String,
  face: Face,
  program: CEVMProgram
}
```

---

# 5. Type Rules

### Rule 1 — Face Consistency

```id="t5"
if closure.face == predicate
then closure must consume Relation
```

---

### Rule 2 — Coordinate Type Safety

Only closures may emit Coordinate.

Devices may not emit Coordinate.

---

### Rule 3 — Drift Type

```id="t6"
Drift = Float where 0 ≤ drift ≤ 1
```

---

### Rule 4 — Synset Type

Synset must be WordNet-aligned string:

```id="t7"
<lemma>.<pos>.<sense>
```

Example:

```id="t8"
legislate.v.01
```

---

# 6. Type Inference

Compiler infers:

```id="t9"
NOUN → Entity
VERB → Relation
NOUN (collective) → Collective
commit → Witness
```

---

# 7. Subtyping

```id="t10"
Collective <: Entity
Witness <: Entity
```

---

# 8. Type Soundness Invariant

> No valid execution may produce a value outside its declared type.

---

# 9. Type Error Handling

Emit:

```json
{
  "type":"type_error",
  "reason":"Relation expected, Entity received"
}
```

---

# 10. Determinism Constraint

Type inference must be deterministic across implementations.
